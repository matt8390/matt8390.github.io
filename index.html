<!DOCTYPE html> 
<html> 
<head> 
    <title>Home Questionnaire<span id="selection-marker-1" class="redactor-selection-marker"></span></title> 

    <script>
      !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t,e){var n=document.createElement("script");n.type="text/javascript";n.async=!0;n.src="https://cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(n,a);analytics._loadOptions=e};analytics.SNIPPET_VERSION="4.1.0";
      analytics.load("tQlu3fpSEcR1YPxLkJrv3P4y2x8055U7");
      analytics.page();
      }}();
    </script>

</head> 
<body> 
<h1>What is your favorite place to travel?</h1> 
<p>I am building a directory of the sweetest travel destinations.</p>  
<form name="travel" onsubmit="identify(event)">
     What is your favorite travel destination?
    <input name="destination" required="" size="81" type="text"/> 
    <br><br><br> 
    Any recommendations (cool things to do, places to visit or restaurants to eat)? 
    <br><br> 
    <textarea cols="81" name="details" required="" rows="10">
    </textarea> 
    <br><br> 
    URL: <input name="url" required="" size="75" type="text"/> 
    <br><br>
    Name: <input name="fullname" required="" size="75" type="text"/> 
    <br><br> 
    Email: <input name="email" required="" size="75" type="email"/> 
    <br><br>
    <input name="submit" type="submit" value="submit"/>
</form> 
    <script type="text/javascript">
      function identify(e){
        e.preventDefault();
        var form = e.target;
        var email = form["email"].value;
        var fullname = form["fullname"].value;
        var destination = form["destination"].value;
        var details = form["details"].value;
        var user = {
            email: email, 
            name: fullname, 
            destination: destination, 
            details: details
        };
        analytics.identify(destination, {
            email: email, 
            name: fullname
        });
        analytics.track('destination submitted', user, function() {
            window.location.href = "";
        });

function formatQs() {
	var output = {}; 								
	var qs = 'https://example.com/home?utm_source=google&utm_campaign=simulator_push&utm_content=trees&utm_name=forest';			
	qs = qs.split('&');

	for (var i = 0; i < qs.length; i++) {
		var tokens = qs[i].split('=');
	  output[tokens[0].toLowerCase()] = tokens[1];  
	}
		
	return output;
	
}
          
// Getting the query property-value pairs with the formatQs() call:
var query_parameters = formatQs();

// Getting the properties only, and not the values
var properties = Object.keys(query_parameters);

// Loop through the properties array. If the properties are not UTM parameters, they will be removed from the object query_parameters. The UTM parameters are: utm_source, utm_medium, utm_term, utm_content and utm_campaign.
for (var i = 0; i < properties.length; i++) {
    if (!(properties[i] == 'utm_source' || properties[i] == 'utm_medium' || properties[i] == 'utm_term' || properties[i] == 'utm_content' || properties[i] == 'utm_campaign')){
      delete query_parameters[properties[i]];
    }
}

// Now we will have the clean query parameters with only the UTM parameters in the query_parameters object, and we will track the event with name "User Referred"
  analytics.track('User Referred', query_parameters);
      }
        
        
       
</script>
</body> 
</html>
